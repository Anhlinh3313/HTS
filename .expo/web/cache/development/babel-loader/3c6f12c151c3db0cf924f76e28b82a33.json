{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\angular\\\\hts_reactnative\\\\src\\\\app\\\\screens\\\\details\\\\TabManagement\\\\BookingSystem\\\\BookingSystem.tsx\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport moment from \"moment\";\nimport { Icons } from \"../../../../assets\";\nimport DropDownPickerLine from \"../../../../components/DropDownPickerLine\";\nimport { colors } from \"../../../../utils/Colors\";\nimport PickerModel from \"../../../../components/picker/PickerModel\";\nimport DatePickerCustom from \"../../../../components/DatePickerCustom\";\nimport { GetMemberFilter } from \"../../../../netWorking/memberService\";\nimport { getListBooking } from \"../../../../netWorking/bookingService\";\nimport Loading from \"../../../../components/dialogs/Loading\";\n\nvar BookingSystem = function BookingSystem() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var outletModel = [{\n    label: \"Spa\",\n    value: 1\n  }, {\n    label: \"Ola Restaurant\",\n    value: 2\n  }];\n\n  var _useState3 = useState(2),\n      _useState4 = _slicedToArray(_useState3, 2),\n      outlet = _useState4[0],\n      setOutlet = _useState4[1];\n\n  var onchangeOutlet = function onchangeOutlet(data) {\n    return _regeneratorRuntime.async(function onchangeOutlet$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setOutlet(data);\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var dataTopPicker = [{\n    label: \"All Booking\",\n    value: \"all\"\n  }, {\n    label: \"Lunch\",\n    value: \"lunch\"\n  }, {\n    label: \"Dinner\",\n    value: \"dinner\"\n  }, {\n    label: \"By membership\",\n    value: \"byMembership\"\n  }];\n\n  var _useState5 = useState(dataTopPicker[0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pickerTopValue = _useState6[0],\n      setPickerTopValue = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      bookingList = _useState8[0],\n      setBookingList = _useState8[1];\n\n  var handlePicker = function handlePicker(value) {\n    setPickerTopValue(value);\n  };\n\n  var loadBookingList = function loadBookingList(date) {\n    var fromDateTime, toDateTime, res, dataList, memberInfos, infos;\n    return _regeneratorRuntime.async(function loadBookingList$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setIsLoading(true);\n            fromDateTime = moment(date).format(\"YYYY-MM-DD\");\n            toDateTime = moment(new Date().setDate(new Date(date).getDate() + 1)).format(\"YYYY-MM-DD\");\n            setBookingList([]);\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(getListBooking(fromDateTime, toDateTime, null, null));\n\n          case 6:\n            res = _context2.sent;\n            dataList = [];\n\n            if (!(res.isSuccess == 1 && res.data)) {\n              _context2.next = 17;\n              break;\n            }\n\n            dataList = res.data;\n            dataList.map(function (item) {\n              var time = moment(moment(item.timeStart).format(\"h:mma\"), \"h:mma\");\n              var breakfast = moment(\"10:59am\", \"h:mma\");\n              var lunch = moment(\"01:59pm\", \"h:mma\");\n              var afternoon = moment(\"05:59pm\", \"h:mma\");\n              var dinner = moment(\"08:59pm\", \"h:mma\");\n              var lateDinner = moment(\"11:59pm\", \"h:mma\");\n\n              if (time.isBefore(breakfast)) {\n                item[\"meal\"] = \"breakfast\";\n              }\n\n              if (time.isBetween(breakfast, lunch)) {\n                item[\"meal\"] = \"lunch\";\n              }\n\n              if (time.isBetween(lunch, afternoon)) {\n                item[\"meal\"] = \"afternoon\";\n              }\n\n              if (time.isBetween(afternoon, dinner)) {\n                item[\"meal\"] = \"dinner\";\n              }\n\n              if (time.isAfter(dinner)) {\n                item[\"meal\"] = \"lateDinner\";\n              }\n            });\n            memberInfos = dataList.map(function (t) {\n              return loadInfoMember(t.memCode);\n            });\n            _context2.next = 14;\n            return _regeneratorRuntime.awrap(Promise.all(memberInfos));\n\n          case 14:\n            infos = _context2.sent;\n            dataList.forEach(function (t) {\n              var info = infos.find(function (i) {\n                return i.memberMemCode === t.memCode;\n              });\n\n              if (info) {\n                t.phoneNumber = info.memberCellNum;\n                t.email = info.memberEmail;\n                t.memberSalut = info.memberSalut;\n                t.memberFirstName = info.memberFirstName;\n                t.memberLastName = info.memberLastName;\n              }\n            });\n            setBookingList(dataList);\n\n          case 17:\n            setIsLoading(false);\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var loadInfoMember = function loadInfoMember(memCode) {\n    var res;\n    return _regeneratorRuntime.async(function loadInfoMember$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(GetMemberFilter(memCode));\n\n          case 2:\n            res = _context3.sent;\n\n            if (!(res.isSuccess == 1 && res.data)) {\n              _context3.next = 7;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", res.data[0]);\n\n          case 7:\n            return _context3.abrupt(\"return\", null);\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var changeDate = function changeDate(date) {\n    loadBookingList(date);\n  };\n\n  useEffect(function () {\n    loadBookingList(new Date());\n  }, []);\n\n  var countBooking = function countBooking(key) {\n    var count = 0;\n    bookingList.map(function (item) {\n      if (key === \"member\") {\n        if (item.memCode) count++;\n      } else if (item.meal === key) count++;\n    });\n    return count;\n  };\n\n  var ViewTopProperty = function ViewTopProperty(title, value, style) {\n    return React.createElement(View, {\n      style: [{\n        flex: 1,\n        backgroundColor: \"#414141\",\n        height: 70,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        borderRadius: 4\n      }, style],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: [styles.textGray, {\n        marginBottom: 5,\n        fontSize: 12\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    }, title), React.createElement(Text, {\n      style: styles.text16,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, value));\n  };\n\n  var ViewItemBooking = function ViewItemBooking(booking) {\n    var _booking$phoneNumber, _booking$email, _booking$commentStr, _booking$numCust;\n\n    return React.createElement(View, {\n      style: [{\n        backgroundColor: \"#414141\",\n        borderRadius: 4,\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: [styles.styleRow, {\n        marginBottom: 8\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      style: [{\n        flexDirection: \"row\",\n        alignItems: \"center\"\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }, React.createElement(Image, {\n      source: Icons.avatar,\n      style: styles.avatarStaff,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }), React.createElement(Text, {\n      style: [styles.textName, {\n        width: \"56%\"\n      }],\n      numberOfLines: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, booking.memCode ? (booking.memberSalut ? booking.memberSalut : \"\") + \" \" + (booking.memberFirstName ? booking.memberFirstName : \"\") + \" \" + (booking.memberLastName ? booking.memberLastName : \"\") : booking.fullName ? booking.fullName : \"\")), React.createElement(View, {\n      style: [styles.styleStatus, {\n        backgroundColor: booking.used ? \"#066AFF\" : booking.isActive ? \"#FDB441\" : \"#76D146\"\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: [{\n        color: colors.colorText,\n        lineHeight: 21\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    }, booking.used ? \"Arrived\" : booking.isActive ? \"Confirm\" : \"New\"))), React.createElement(View, {\n      style: [styles.styleRow, {\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: styles.textGray,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }\n    }, \"Date:\"), React.createElement(Text, {\n      style: [{\n        color: colors.colorText\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, moment(booking.timeStart).format(\"DD/MM/YYYY\"))), React.createElement(View, {\n      style: [styles.styleRow, {\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: styles.textGray,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }\n    }, \"Time:\"), React.createElement(Text, {\n      style: [{\n        color: colors.colorText\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, moment(booking.timeStart).format(\"hh:mm A\"))), React.createElement(View, {\n      style: [styles.styleRow, {\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: styles.textGray,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, \"Phone:\"), React.createElement(Text, {\n      style: [{\n        color: colors.colorText\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, (_booking$phoneNumber = booking.phoneNumber) != null ? _booking$phoneNumber : \"-\")), React.createElement(View, {\n      style: [styles.styleRow, {\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: styles.textGray,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }, \"Email:\"), React.createElement(Text, {\n      style: [{\n        color: colors.colorText\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }\n    }, (_booking$email = booking.email) != null ? _booking$email : \"-\")), React.createElement(View, {\n      style: [styles.styleRow, {\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: styles.textGray,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }\n    }, \"Note:\"), React.createElement(Text, {\n      style: [{\n        color: colors.colorText\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, (_booking$commentStr = booking.commentStr) != null ? _booking$commentStr : \"-\")), React.createElement(View, {\n      style: [styles.styleRow, {\n        marginBottom: 10\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: styles.textGray,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, \"Pax:\"), React.createElement(Text, {\n      style: [{\n        color: colors.colorText\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, ((_booking$numCust = booking.numCust) != null ? _booking$numCust : \"0\") + \" person\", \" \")));\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 5\n    }\n  }, React.createElement(ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, React.createElement(PickerModel, {\n    data: outletModel,\n    defaultValue: \"Ola Restaurant\",\n    onSelectedValue: function onSelectedValue(value) {\n      onchangeOutlet(value.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: styles.line,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: {\n      paddingHorizontal: 15,\n      marginBottom: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.titleHeader,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: [styles.textTitleHeader, {\n      textAlign: \"center\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, \"BOOKING SYSTEM\"))), React.createElement(DatePickerCustom, {\n    onSubmit: function onSubmit(date) {\n      changeDate(date);\n    },\n    limitMonth: 3,\n    disablePickPast: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: {\n      padding: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      flexDirection: \"row\",\n      marginBottom: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }, ViewTopProperty(\"Lunch Booking\", countBooking(\"lunch\"), {\n    marginRight: 10\n  }), ViewTopProperty(\"Dinner Booking\", countBooking(\"dinner\"))), React.createElement(View, {\n    style: {\n      flex: 1,\n      flexDirection: \"row\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }, ViewTopProperty(\"By membership\", countBooking(\"member\"), {\n    marginRight: 10\n  }), ViewTopProperty(\"Breakfast Booking\", countBooking(\"breakfast\"), {}))), React.createElement(DropDownPickerLine, {\n    data: dataTopPicker,\n    onSelected: function onSelected(value) {\n      handlePicker(value);\n    },\n    itemSelected: pickerTopValue,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: {\n      padding: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }\n  }, bookingList.map(function (item, index) {\n    switch (pickerTopValue.value) {\n      case \"lunch\":\n        return item.meal === \"lunch\" && React.createElement(View, {\n          key: index,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 49\n          }\n        }, ViewItemBooking(item));\n\n      case \"dinner\":\n        return item.meal === \"dinner\" && React.createElement(View, {\n          key: index,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 50\n          }\n        }, ViewItemBooking(item));\n\n      case \"byMembership\":\n        return item.memCode && React.createElement(View, {\n          key: index,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 40\n          }\n        }, ViewItemBooking(item));\n\n      default:\n        return React.createElement(View, {\n          key: index,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 24\n          }\n        }, ViewItemBooking(item));\n    }\n  })), React.createElement(View, {\n    style: {\n      height: 200\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }\n  })), isLoading && React.createElement(Loading, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 21\n    }\n  }));\n};\n\nexport default BookingSystem;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundApp\n  },\n  line: {\n    height: 10,\n    backgroundColor: colors.backgroundTab\n  },\n  styleRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  },\n  text16: {\n    color: colors.colorText,\n    fontWeight: \"500\",\n    fontSize: 16\n  },\n  textGray: {\n    color: colors.colorLine,\n    fontWeight: \"400\",\n    fontSize: 14\n  },\n  titleHeader: {\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.colorLine\n  },\n  textTitleHeader: {\n    color: colors.colorText,\n    fontWeight: \"500\",\n    fontSize: 14\n  },\n  textName: {\n    color: colors.colorText,\n    fontSize: 16,\n    fontWeight: \"700\"\n  },\n  avatarStaff: {\n    width: 44,\n    height: 44,\n    borderRadius: 30,\n    backgroundColor: \"#c4c4c4\",\n    marginRight: 15\n  },\n  styleStatus: {\n    paddingHorizontal: 12,\n    paddingVertical: 2,\n    backgroundColor: \"#76D146\",\n    borderRadius: 4,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"sources":["D:/angular/hts_reactnative/src/app/screens/details/TabManagement/BookingSystem/BookingSystem.tsx"],"names":["React","useState","useEffect","moment","Icons","DropDownPickerLine","colors","PickerModel","DatePickerCustom","GetMemberFilter","getListBooking","Loading","BookingSystem","isLoading","setIsLoading","outletModel","label","value","outlet","setOutlet","onchangeOutlet","data","dataTopPicker","pickerTopValue","setPickerTopValue","bookingList","setBookingList","handlePicker","loadBookingList","date","fromDateTime","format","toDateTime","Date","setDate","getDate","res","dataList","isSuccess","map","item","time","timeStart","breakfast","lunch","afternoon","dinner","lateDinner","isBefore","isBetween","isAfter","memberInfos","t","loadInfoMember","memCode","Promise","all","infos","forEach","info","find","i","memberMemCode","phoneNumber","memberCellNum","email","memberEmail","memberSalut","memberFirstName","memberLastName","changeDate","countBooking","key","count","meal","ViewTopProperty","title","style","flex","backgroundColor","height","alignItems","justifyContent","borderRadius","styles","textGray","marginBottom","fontSize","text16","ViewItemBooking","booking","paddingHorizontal","paddingVertical","styleRow","flexDirection","avatar","avatarStaff","textName","width","fullName","styleStatus","used","isActive","color","colorText","lineHeight","commentStr","numCust","container","line","titleHeader","textTitleHeader","textAlign","padding","marginRight","index","StyleSheet","create","backgroundApp","backgroundTab","fontWeight","colorLine","borderBottomWidth","borderBottomColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Text,\r\n  TouchableWithoutFeedback,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  KeyboardTypeOptions,\r\n  ImageProps,\r\n  Platform,\r\n  Dimensions,\r\n  ViewStyle,\r\n  Image,\r\n} from \"react-native\";\r\n\r\nimport moment from \"moment\";\r\nimport { Icons, Images } from \"../../../../assets\";\r\nimport DropDownPickerLine from \"../../../../components/DropDownPickerLine\";\r\nimport { IModalPicker, Imodel } from \"../../../../models/Imodel\";\r\nimport { colors } from \"../../../../utils/Colors\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport PickerModel from \"../../../../components/picker/PickerModel\";\r\nimport DatePickerCustom from \"../../../../components/DatePickerCustom\";\r\nimport { GetMemberFilter } from \"../../../../netWorking/memberService\";\r\nimport { getListBooking } from \"../../../../netWorking/bookingService\";\r\nimport { bookingModel } from \"../../../../models/bookingModel\";\r\nimport Loading from \"../../../../components/dialogs/Loading\";\r\nconst BookingSystem = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  // ----Outlet\r\n  const outletModel = [\r\n    { label: \"Spa\", value: 1 },\r\n    { label: \"Ola Restaurant\", value: 2 },\r\n  ];\r\n  const [outlet, setOutlet] = useState(2);\r\n  const onchangeOutlet = async (data: any) => {\r\n    setOutlet(data);\r\n  };\r\n  // ----Picker\r\n  const dataTopPicker = [\r\n    { label: \"All Booking\", value: \"all\" },\r\n    { label: \"Lunch\", value: \"lunch\" },\r\n    { label: \"Dinner\", value: \"dinner\" },\r\n    { label: \"By membership\", value: \"byMembership\" },\r\n  ];\r\n  const [pickerTopValue, setPickerTopValue] = useState<IModalPicker>(dataTopPicker[0]);\r\n  const [bookingList, setBookingList] = useState([]);\r\n  const handlePicker = (value: IModalPicker) => {\r\n    setPickerTopValue(value);\r\n  };\r\n  //fetch data\r\n  const loadBookingList = async date => {\r\n    setIsLoading(true)\r\n    const fromDateTime = moment(date).format(\"YYYY-MM-DD\");\r\n    const toDateTime = moment(new Date().setDate(new Date(date).getDate() + 1)).format(\"YYYY-MM-DD\");\r\n    setBookingList([]);\r\n    const res = await getListBooking(fromDateTime, toDateTime, null, null);\r\n    let dataList = [];\r\n    if (res.isSuccess == 1 && res.data) {\r\n      dataList = res.data as bookingModel[];\r\n      dataList.map(item => {\r\n        const time = moment(moment(item.timeStart).format(\"h:mma\"), \"h:mma\");\r\n        const breakfast = moment(\"10:59am\", \"h:mma\");\r\n        const lunch = moment(\"01:59pm\", \"h:mma\");\r\n        const afternoon = moment(\"05:59pm\", \"h:mma\");\r\n        const dinner = moment(\"08:59pm\", \"h:mma\");\r\n        const lateDinner = moment(\"11:59pm\", \"h:mma\");\r\n        if (time.isBefore(breakfast)) {\r\n          item[\"meal\"] = \"breakfast\";\r\n        }\r\n        if (time.isBetween(breakfast, lunch)) {\r\n          item[\"meal\"] = \"lunch\";\r\n        }\r\n        if (time.isBetween(lunch, afternoon)) {\r\n          item[\"meal\"] = \"afternoon\";\r\n        }\r\n        if (time.isBetween(afternoon, dinner)) {\r\n          item[\"meal\"] = \"dinner\";\r\n        }\r\n        if (time.isAfter(dinner)) {\r\n          item[\"meal\"] = \"lateDinner\";\r\n        }\r\n      });\r\n      const memberInfos = dataList.map(t => loadInfoMember(t.memCode));\r\n      const infos = await Promise.all(memberInfos);\r\n      dataList.forEach(t => {\r\n        const info = infos.find(i => i.memberMemCode === t.memCode);\r\n        if (info) {\r\n          t.phoneNumber = info.memberCellNum;\r\n          t.email = info.memberEmail;\r\n          t.memberSalut = info.memberSalut;\r\n          t.memberFirstName = info.memberFirstName;\r\n          t.memberLastName = info.memberLastName;\r\n        }\r\n      });\r\n      setBookingList(dataList);\r\n    }\r\n    \r\n    setIsLoading(false)\r\n  };\r\n  const loadInfoMember = async memCode => {\r\n    const res = await GetMemberFilter(memCode);\r\n    if (res.isSuccess == 1 && res.data) {\r\n      return res.data[0];\r\n    } else return null;\r\n  };\r\n  const changeDate = (date: Date) => {\r\n    loadBookingList(date);\r\n  };\r\n  useEffect(() => {\r\n    loadBookingList(new Date());\r\n  }, []);\r\n  const countBooking = (key: string) => {\r\n    let count = 0;\r\n    bookingList.map(item => {\r\n      if (key === \"member\") {\r\n        if (item.memCode) count++;\r\n      } else if (item.meal === key) count++;\r\n    });\r\n    return count;\r\n  };\r\n  // ViewTopProperty\r\n  const ViewTopProperty = (title: string, value: number, style?: ViewStyle) => {\r\n    return (\r\n      <View\r\n        style={[\r\n          {\r\n            flex: 1,\r\n            backgroundColor: \"#414141\",\r\n            height: 70,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            borderRadius: 4,\r\n          },\r\n          style,\r\n        ]}\r\n      >\r\n        <Text style={[styles.textGray, { marginBottom: 5, fontSize: 12 }]}>{title}</Text>\r\n        <Text style={styles.text16}>{value}</Text>\r\n      </View>\r\n    );\r\n  };\r\n  //-------------\r\n  const ViewItemBooking = (booking: bookingModel) => {\r\n    return (\r\n      <View\r\n        style={[\r\n          {\r\n            backgroundColor: \"#414141\",\r\n            borderRadius: 4,\r\n            paddingHorizontal: 16,\r\n            paddingVertical: 10,\r\n            marginBottom: 10,\r\n          },\r\n        ]}\r\n      >\r\n        <View style={[styles.styleRow, { marginBottom: 8 }]}>\r\n          <View style={[{ flexDirection: \"row\", alignItems: \"center\" }]}>\r\n            <Image source={Icons.avatar} style={styles.avatarStaff}></Image>\r\n            <Text style={[styles.textName, { width: \"56%\" }]} numberOfLines={2}>\r\n              {booking.memCode\r\n                ? `${booking.memberSalut ? booking.memberSalut : \"\"} ${booking.memberFirstName ? booking.memberFirstName : \"\"} ${\r\n                    booking.memberLastName ? booking.memberLastName : \"\"\r\n                  }`\r\n                : booking.fullName\r\n                ? booking.fullName\r\n                : \"\"}\r\n            </Text>\r\n          </View>\r\n          <View\r\n            style={[\r\n              styles.styleStatus,\r\n              {\r\n                backgroundColor: booking.used ? \"#066AFF\" : booking.isActive ? \"#FDB441\" : \"#76D146\",\r\n              },\r\n            ]}\r\n          >\r\n            <Text style={[{ color: colors.colorText, lineHeight: 21 }]}>\r\n              {booking.used ? \"Arrived\" : booking.isActive ? \"Confirm\" : \"New\"}\r\n            </Text>\r\n          </View>\r\n        </View>\r\n        <View style={[styles.styleRow, { marginBottom: 10 }]}>\r\n          <Text style={styles.textGray}>Date:</Text>\r\n          <Text style={[{ color: colors.colorText }]}>{moment(booking.timeStart).format(\"DD/MM/YYYY\")}</Text>\r\n        </View>\r\n        <View style={[styles.styleRow, { marginBottom: 10 }]}>\r\n          <Text style={styles.textGray}>Time:</Text>\r\n          <Text style={[{ color: colors.colorText }]}>{moment(booking.timeStart).format(\"hh:mm A\")}</Text>\r\n        </View>\r\n        <View style={[styles.styleRow, { marginBottom: 10 }]}>\r\n          <Text style={styles.textGray}>Phone:</Text>\r\n          <Text style={[{ color: colors.colorText }]}>{booking.phoneNumber ?? \"-\"}</Text>\r\n        </View>\r\n        <View style={[styles.styleRow, { marginBottom: 10 }]}>\r\n          <Text style={styles.textGray}>Email:</Text>\r\n          <Text style={[{ color: colors.colorText }]}>{booking.email ?? \"-\"}</Text>\r\n        </View>\r\n        <View style={[styles.styleRow, { marginBottom: 10 }]}>\r\n          <Text style={styles.textGray}>Note:</Text>\r\n          <Text style={[{ color: colors.colorText }]}>{booking.commentStr ?? \"-\"}</Text>\r\n        </View>\r\n        <View style={[styles.styleRow, { marginBottom: 10 }]}>\r\n          <Text style={styles.textGray}>Pax:</Text>\r\n          <Text style={[{ color: colors.colorText }]}>{`${booking.numCust ?? \"0\"} person`} </Text>\r\n        </View>\r\n      </View>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <ScrollView>\r\n        {/* -----------------Picker Outlet------------- */}\r\n        <PickerModel\r\n          data={outletModel}\r\n          defaultValue=\"Ola Restaurant\"\r\n          onSelectedValue={value => {\r\n            onchangeOutlet(value.value);\r\n          }}\r\n        ></PickerModel>\r\n        {/* ----------------------------------------------- */}\r\n\r\n        <View style={styles.line}></View>\r\n        <View style={{ paddingHorizontal: 15, marginBottom: 10 }}>\r\n          <View style={styles.titleHeader}>\r\n            <Text style={[styles.textTitleHeader, { textAlign: \"center\" }]}>BOOKING SYSTEM</Text>\r\n          </View>\r\n        </View>\r\n        <DatePickerCustom\r\n          onSubmit={date => {\r\n            changeDate(date);\r\n          }}\r\n          limitMonth={3}\r\n          disablePickPast={true}\r\n        ></DatePickerCustom>\r\n        {/* ---------------------------------------- */}\r\n        <View style={{ padding: 15 }}>\r\n          <View style={{ flex: 1, flexDirection: \"row\", marginBottom: 10 }}>\r\n            {ViewTopProperty(\"Lunch Booking\", countBooking(\"lunch\"), {\r\n              marginRight: 10,\r\n            })}\r\n            {ViewTopProperty(\"Dinner Booking\", countBooking(\"dinner\"))}\r\n          </View>\r\n          <View style={{ flex: 1, flexDirection: \"row\" }}>\r\n            {ViewTopProperty(\"By membership\", countBooking(\"member\"), {\r\n              marginRight: 10,\r\n            })}\r\n            {ViewTopProperty(\"Breakfast Booking\", countBooking(\"breakfast\"), {})}\r\n          </View>\r\n        </View>\r\n        {/* ---------------------------------------- */}\r\n        <DropDownPickerLine\r\n          data={dataTopPicker}\r\n          onSelected={value => {\r\n            handlePicker(value);\r\n          }}\r\n          itemSelected={pickerTopValue}\r\n        ></DropDownPickerLine>\r\n        {/* ---------------------------------------- */}\r\n        <View style={{ padding: 15 }}>\r\n          {bookingList.map((item, index) => {\r\n            switch (pickerTopValue.value) {\r\n              case \"lunch\":\r\n                return item.meal === \"lunch\" && <View key={index}>{ViewItemBooking(item)}</View>;\r\n              case \"dinner\":\r\n                return item.meal === \"dinner\" && <View key={index}>{ViewItemBooking(item)}</View>;\r\n              case \"byMembership\":\r\n                return item.memCode && <View key={index}>{ViewItemBooking(item)}</View>;\r\n\r\n              default:\r\n                return <View key={index}>{ViewItemBooking(item)}</View>;\r\n            }\r\n          })}\r\n        </View>\r\n        <View style={{ height: 200 }}></View>\r\n      </ScrollView>\r\n      {isLoading && <Loading/>}\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default BookingSystem;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: colors.backgroundApp,\r\n  },\r\n  line: {\r\n    height: 10,\r\n    backgroundColor: colors.backgroundTab,\r\n  },\r\n  styleRow: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n  },\r\n  text16: {\r\n    color: colors.colorText,\r\n    fontWeight: \"500\",\r\n    fontSize: 16,\r\n  },\r\n  textGray: {\r\n    color: colors.colorLine,\r\n    fontWeight: \"400\",\r\n    fontSize: 14,\r\n  },\r\n\r\n  titleHeader: {\r\n    paddingVertical: 16,\r\n    paddingHorizontal: 16,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: colors.colorLine,\r\n  },\r\n\r\n  textTitleHeader: {\r\n    color: colors.colorText,\r\n    fontWeight: \"500\",\r\n    fontSize: 14,\r\n  },\r\n\r\n  textName: {\r\n    color: colors.colorText,\r\n    fontSize: 16,\r\n    fontWeight: \"700\",\r\n  },\r\n  avatarStaff: {\r\n    width: 44,\r\n    height: 44,\r\n    borderRadius: 30,\r\n    backgroundColor: \"#c4c4c4\",\r\n    marginRight: 15,\r\n  },\r\n  styleStatus: {\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 2,\r\n    backgroundColor: \"#76D146\",\r\n    borderRadius: 4,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}