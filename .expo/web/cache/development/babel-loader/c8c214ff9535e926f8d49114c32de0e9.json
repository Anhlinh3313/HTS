{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\angular\\\\hts_reactnative\\\\src\\\\app\\\\screens\\\\details\\\\TabManagement\\\\Loyalty\\\\PromotionReport.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport DateTimePicker from \"../../../../components/datetimepicker\";\nimport PickerModel from \"../../../../components/picker/PickerModel\";\nimport { colors } from \"../../../../utils/Colors\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport { VictoryAxis, VictoryBar, VictoryChart, VictoryGroup, VictoryLabel, VictoryVoronoiContainer } from \"victory-native\";\nimport DropDown from \"../../../../components/dropDown/DropDown\";\nimport { getPromotionReport } from \"../../../../netWorking/loyaltyService\";\nimport moment from \"moment\";\nimport DialogAwait from \"../../../../components/dialogs/Loading\";\nimport { Money } from \"../../../../components/generalConvert/conVertmunberToMoney\";\nexport function PromotionReport() {\n  var _Money;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var dataOption = [{\n    label: \"Top 5 promotion during a period of time\",\n    value: 5\n  }, {\n    label: \"Top 10 promotion during a period of time\",\n    value: 10\n  }];\n  var PromotionChart = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14];\n  var revenueChart = [10000000, 20000000, 30000000, 40000000, 50000000, 60000000, 70000000, 80000000, 90000000, 100000000];\n  var widthChar = revenueChart.length * 80;\n\n  var _useState3 = useState(2),\n      _useState4 = _slicedToArray(_useState3, 2),\n      outlet = _useState4[0],\n      setOutlet = _useState4[1];\n\n  var onchangeOutlet = function onchangeOutlet(data) {\n    return _regeneratorRuntime.async(function onchangeOutlet$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setOutlet(data);\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var _useState5 = useState(moment(new Date().setDate(new Date().getDate() - 1)).format(\"YYYY-MM-DD\")),\n      _useState6 = _slicedToArray(_useState5, 2),\n      fromDateTime = _useState6[0],\n      setFromDateTime = _useState6[1];\n\n  var _useState7 = useState(moment(new Date().setDate(new Date().getDate())).format(\"YYYY-MM-DD\")),\n      _useState8 = _slicedToArray(_useState7, 2),\n      endDateTime = _useState8[0],\n      setEndDateTime = _useState8[1];\n\n  var _useState9 = useState(5),\n      _useState10 = _slicedToArray(_useState9, 2),\n      numTop = _useState10[0],\n      setNumTop = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      dataPromotionReport = _useState12[0],\n      setDataPromotionReport = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      totalNetCostEach = _useState14[0],\n      setTotalNetCostEach = _useState14[1];\n\n  var _useState15 = useState(revenueChart),\n      _useState16 = _slicedToArray(_useState15, 2),\n      valueRevenueChart = _useState16[0],\n      setValueRevenueChart = _useState16[1];\n\n  var loadPromotionReport = function loadPromotionReport() {\n    var res;\n    return _regeneratorRuntime.async(function loadPromotionReport$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setIsLoading(true);\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(getPromotionReport(fromDateTime, endDateTime, 1, numTop));\n\n          case 3:\n            res = _context2.sent;\n\n            if (res.isSuccess === 1 && res.data) {\n              setDataPromotionReport(res.data.pointPromotionReport);\n              setTotalNetCostEach(res.data.totalnetCostEach);\n            }\n\n            setIsLoading(false);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    loadPromotionReport();\n  }, [fromDateTime, endDateTime, numTop]);\n  useEffect(function () {\n    if (dataPromotionReport.length > 0) {\n      var _revenueChart = [];\n      var units = dataPromotionReport[0].y.toString().length;\n      var unit = dataPromotionReport[0].y.toString().charAt(0);\n\n      for (var index = 1; index < +unit + 2; index++) {\n        _revenueChart.push(index * Math.pow(10, units - 1));\n      }\n\n      setValueRevenueChart(_revenueChart);\n    }\n  }, [dataPromotionReport]);\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, React.createElement(PickerModel, {\n    data: null,\n    defaultValue: \"Ola Restaurant\",\n    onSelectedValue: function onSelectedValue(value) {\n      onchangeOutlet(value.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), React.createElement(DateTimePicker, {\n    onSubmitFromDate: function onSubmitFromDate(date) {\n      return setFromDateTime(moment(date).format(\"YYYY-MM-DD\"));\n    },\n    onSubmitEndDate: function onSubmitEndDate(date) {\n      return setEndDateTime(moment(date).format(\"YYYY-MM-DD\"));\n    },\n    isShowTime: false,\n    fromDate: fromDateTime,\n    endDate: endDateTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.line,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      paddingHorizontal: 15,\n      marginBottom: 10,\n      zIndex: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.titleHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: [styles.textTitleHeader, {\n      textAlign: \"center\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, \"PROMOTION REPORT\")), React.createElement(View, {\n    style: {\n      marginTop: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, React.createElement(DropDown, {\n    data: dataOption,\n    defaultLabel: dataOption[0].label,\n    heightContent: 70,\n    onSelected: function onSelected(values) {\n      setNumTop(values.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }))), React.createElement(ScrollView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      paddingHorizontal: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, dataPromotionReport.length > 0 && React.createElement(ScrollView, {\n    horizontal: true,\n    endFillColor: colors.backgroundApp,\n    style: {\n      backgroundColor: colors.backgroundApp\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      marginVertical: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, React.createElement(VictoryChart, {\n    domainPadding: {\n      x: 40,\n      y: 45\n    },\n    width: widthChar + 170,\n    height: dataPromotionReport.length * 60 + 100,\n    padding: {\n      top: 30,\n      bottom: 50,\n      left: 130,\n      right: 80\n    },\n    containerComponent: React.createElement(VictoryVoronoiContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 39\n      }\n    }),\n    style: {\n      parent: {\n        cursor: \"pointer\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, React.createElement(VictoryChart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  }, React.createElement(VictoryLabel, {\n    y: 10,\n    x: 100,\n    style: {\n      fontSize: 12,\n      fontStyle: \"normal\",\n      fill: \"#C4C4C4\"\n    },\n    text: \"Promotion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }), React.createElement(VictoryLabel, {\n    x: widthChar + 110,\n    y: dataPromotionReport.length * 60 - 50,\n    style: {\n      fontSize: 10,\n      fontStyle: \"normal\",\n      fill: colors.colorText\n    },\n    text: \"Million\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }), React.createElement(VictoryLabel, {\n    y: dataPromotionReport.length * 60 + 60,\n    x: 128,\n    style: {\n      fontSize: 10,\n      fontStyle: \"normal\",\n      fill: colors.colorText\n    },\n    text: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }), React.createElement(VictoryAxis, {\n    tickValues: PromotionChart,\n    tickFormat: function tickFormat(t) {\n      return \"\" + t;\n    },\n    style: whiteStyleBottom,\n    orientation: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }), React.createElement(VictoryAxis, {\n    dependentAxis: true,\n    tickValues: valueRevenueChart,\n    tickFormat: function tickFormat(t) {\n      return \"\" + Money(t);\n    },\n    style: whiteStyleBottom,\n    orientation: \"bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  })), React.createElement(VictoryGroup, {\n    horizontal: true,\n    padding: {\n      top: 0,\n      bottom: 50,\n      left: 90,\n      right: 80\n    },\n    offset: 15,\n    style: {\n      data: {\n        width: 16\n      }\n    },\n    colorScale: [\"#5F8BFC\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }, React.createElement(VictoryBar, {\n    labelComponent: React.createElement(VictoryLabel, {\n      dx: 5,\n      dy: -8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 39\n      }\n    }),\n    style: {\n      labels: {\n        fill: colors.colorText,\n        color: colors.colorText,\n        fontSize: 12\n      }\n    },\n    labels: function labels(_ref) {\n      var datum = _ref.datum;\n      return [Money(Math.round(datum.y))];\n    },\n    data: dataPromotionReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }), React.createElement(VictoryBar, {\n    labelComponent: React.createElement(VictoryLabel, {\n      dx: -21,\n      dy: 7,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 39\n      }\n    }),\n    style: {\n      labels: {\n        fill: colors.colorText,\n        color: colors.colorText,\n        fontSize: 12\n      }\n    },\n    labels: function labels(_ref2) {\n      var datum = _ref2.datum;\n      return [Math.round(datum.y / valueRevenueChart[valueRevenueChart.length - 1] * 100) + \"%\"];\n    },\n    data: dataPromotionReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }))))), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.titlrevenue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.text16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, \"Revenue Brought by Promotion\")), React.createElement(View, {\n    style: styles.containerRevenue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.itemrevenueLeft,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 15\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 2,\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: [styles.textGray16, styles.textCenter],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 19\n    }\n  }, \"Promotion\")), React.createElement(View, {\n    style: {\n      flex: 2,\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: [styles.text16, styles.textCenter],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 19\n    }\n  }, dataPromotionReport.length > 0 ? dataPromotionReport[0].x : \"Buy 1 Get 1\"))), React.createElement(View, {\n    style: styles.itemrevenueRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 2,\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: [styles.textGray16, styles.textCenter],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }, \"Revenue\")), React.createElement(View, {\n    style: {\n      flex: 2,\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: [styles.text16, styles.textCenter],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 19\n    }\n  }, ((_Money = Money(Math.round(totalNetCostEach))) != null ? _Money : 0) + \" VND\"))))))), isLoading && React.createElement(DialogAwait, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 21\n    }\n  }));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.backgroundApp\n  },\n  line: {\n    height: 10,\n    backgroundColor: colors.backgroundTab\n  },\n  textCenter: {\n    textAlign: \"center\"\n  },\n  text16: {\n    color: colors.colorText,\n    fontWeight: \"500\",\n    fontSize: 16\n  },\n  textGray: {\n    color: colors.colorLine,\n    fontWeight: \"400\",\n    fontSize: 14\n  },\n  textGray16: {\n    color: colors.colorLine,\n    fontWeight: \"400\",\n    fontSize: 14\n  },\n  text: {\n    color: colors.white,\n    fontWeight: \"400\",\n    fontSize: 14\n  },\n  titleHeader: {\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n    marginLeft: 25,\n    marginRight: 25,\n    borderBottomColor: colors.colorLine\n  },\n  textTitleHeader: {\n    color: colors.colorText,\n    fontWeight: \"500\",\n    fontSize: 16\n  },\n  itemDropDown: {\n    padding: 10,\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  dropDowns: {\n    flex: 1,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  dropDowBody: {\n    backgroundColor: colors.grayLight,\n    position: \"absolute\",\n    zIndex: 1000,\n    right: 0,\n    left: 0,\n    top: 42\n  },\n  titlrevenue: {\n    borderBottomWidth: 1,\n    paddingBottom: 10,\n    borderBottomColor: colors.white\n  },\n  containerRevenue: {\n    flex: 1,\n    flexDirection: \"row\",\n    paddingVertical: 10\n  },\n  itemrevenueLeft: {\n    flex: 2,\n    height: 77,\n    marginRight: 5,\n    padding: 5,\n    borderRadius: 4,\n    flexDirection: \"column\",\n    backgroundColor: colors.grayLight\n  },\n  itemrevenueRight: {\n    flex: 2,\n    height: 77,\n    marginLeft: 5,\n    borderRadius: 4,\n    padding: 5,\n    flexDirection: \"column\",\n    justifyContent: \"space-around\",\n    backgroundColor: colors.grayLight\n  }\n});\nvar whiteStyle = {\n  grid: {\n    stroke: colors.white,\n    strokeWidth: 0.5\n  },\n  axis: {\n    stroke: colors.backgroundApp\n  },\n  tickLabels: {\n    fill: colors.white,\n    fontSize: 10\n  }\n};\nvar whiteStyleBottom = {\n  axis: {\n    stroke: colors.white\n  },\n  tickLabels: {\n    fontSize: 10,\n    padding: 5,\n    fill: colors.white\n  }\n};","map":{"version":3,"sources":["D:/angular/hts_reactnative/src/app/screens/details/TabManagement/Loyalty/PromotionReport.tsx"],"names":["React","useState","useEffect","DateTimePicker","PickerModel","colors","ScrollView","VictoryAxis","VictoryBar","VictoryChart","VictoryGroup","VictoryLabel","VictoryVoronoiContainer","DropDown","getPromotionReport","moment","DialogAwait","Money","PromotionReport","isLoading","setIsLoading","dataOption","label","value","PromotionChart","revenueChart","widthChar","length","outlet","setOutlet","onchangeOutlet","data","Date","setDate","getDate","format","fromDateTime","setFromDateTime","endDateTime","setEndDateTime","numTop","setNumTop","dataPromotionReport","setDataPromotionReport","totalNetCostEach","setTotalNetCostEach","valueRevenueChart","setValueRevenueChart","loadPromotionReport","res","isSuccess","pointPromotionReport","totalnetCostEach","_revenueChart","units","y","toString","unit","charAt","index","push","styles","container","date","line","paddingHorizontal","marginBottom","zIndex","titleHeader","textTitleHeader","textAlign","marginTop","values","backgroundApp","backgroundColor","marginVertical","x","top","bottom","left","right","parent","cursor","fontSize","fontStyle","fill","colorText","t","whiteStyleBottom","width","labels","color","datum","Math","round","titlrevenue","text16","containerRevenue","itemrevenueLeft","flex","justifyContent","textGray16","textCenter","itemrevenueRight","StyleSheet","create","height","backgroundTab","fontWeight","textGray","colorLine","text","white","paddingVertical","borderBottomWidth","marginLeft","marginRight","borderBottomColor","itemDropDown","padding","flexDirection","alignItems","dropDowns","dropDowBody","grayLight","position","paddingBottom","borderRadius","whiteStyle","grid","stroke","strokeWidth","axis","tickLabels"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { View, StyleSheet, Text, FlatList, Image, TouchableHighlight } from \"react-native\";\r\nimport DateTimePicker from \"../../../../components/datetimepicker\";\r\nimport PickerModel from \"../../../../components/picker/PickerModel\";\r\nimport { colors } from \"../../../../utils/Colors\";\r\nimport { Imodel } from \"../../../../models/Imodel\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport { VictoryAxis, VictoryBar, VictoryChart, VictoryGroup, VictoryLabel, VictoryVoronoiContainer } from \"victory-native\";\r\nimport DropDown from \"../../../../components/dropDown/DropDown\";\r\nimport { getPromotionReport } from \"../../../../netWorking/loyaltyService\";\r\nimport moment from \"moment\";\r\nimport DialogAwait from \"../../../../components/dialogs/Loading\";\r\nimport { Money } from \"../../../../components/generalConvert/conVertmunberToMoney\";\r\nexport function PromotionReport() {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const dataOption: Imodel[] = [\r\n    { label: \"Top 5 promotion during a period of time\", value: 5 },\r\n    { label: \"Top 10 promotion during a period of time\", value: 10 },\r\n  ];\r\n\r\n  const PromotionChart = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14];\r\n  const revenueChart = [10000000, 20000000, 30000000, 40000000, 50000000, 60000000, 70000000, 80000000, 90000000, 100000000];\r\n  const widthChar = revenueChart.length * 80;\r\n  const [outlet, setOutlet] = useState(2);\r\n  const onchangeOutlet = async (data: any) => {\r\n    setOutlet(data);\r\n  };\r\n  //--------datetime picker\r\n  const [fromDateTime, setFromDateTime] = useState(moment(new Date().setDate(new Date().getDate() - 1)).format(\"YYYY-MM-DD\"));\r\n  const [endDateTime, setEndDateTime] = useState(moment(new Date().setDate(new Date().getDate())).format(\"YYYY-MM-DD\"));\r\n\r\n  const [numTop, setNumTop] = useState(5);\r\n  const [dataPromotionReport, setDataPromotionReport] = useState([]);\r\n  const [totalNetCostEach, setTotalNetCostEach] = useState(0);\r\n  const [valueRevenueChart, setValueRevenueChart] = useState(revenueChart);\r\n\r\n  const loadPromotionReport = async () => {\r\n    setIsLoading(true);\r\n    const res = await getPromotionReport(fromDateTime, endDateTime, 1, numTop);\r\n    if (res.isSuccess === 1 && res.data) {\r\n      setDataPromotionReport(res.data.pointPromotionReport);\r\n      setTotalNetCostEach(res.data.totalnetCostEach);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n  useEffect(() => {\r\n    loadPromotionReport();\r\n  }, [fromDateTime, endDateTime, numTop]);\r\n  useEffect(() => {\r\n    if (dataPromotionReport.length > 0) {\r\n      let _revenueChart = [];\r\n      let units = dataPromotionReport[0].y.toString().length;\r\n      let unit = dataPromotionReport[0].y.toString().charAt(0);\r\n      for (let index = 1; index < +unit + 2; index++) {\r\n        _revenueChart.push(index * 10 ** (units - 1));\r\n      }\r\n      setValueRevenueChart(_revenueChart);\r\n    }\r\n  }, [dataPromotionReport]);\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* -----------------Picker Outlet------------- */}\r\n      <PickerModel\r\n        data={null}\r\n        defaultValue=\"Ola Restaurant\"\r\n        onSelectedValue={value => {\r\n          onchangeOutlet(value.value);\r\n        }}\r\n      ></PickerModel>\r\n      {/* ------------------------------ */}\r\n      <DateTimePicker\r\n        onSubmitFromDate={date => setFromDateTime(moment(date).format(\"YYYY-MM-DD\"))}\r\n        onSubmitEndDate={date => setEndDateTime(moment(date).format(\"YYYY-MM-DD\"))}\r\n        isShowTime={false}\r\n        fromDate={fromDateTime}\r\n        endDate={endDateTime}\r\n      ></DateTimePicker>\r\n      {/* ---------------------------------------- */}\r\n      <View style={styles.line}></View>\r\n      <View style={{ paddingHorizontal: 15, marginBottom: 10, zIndex: 2 }}>\r\n        <View style={styles.titleHeader}>\r\n          <Text style={[styles.textTitleHeader, { textAlign: \"center\" }]}>PROMOTION REPORT</Text>\r\n        </View>\r\n        <View style={{ marginTop: 15 }}>\r\n          <DropDown\r\n            data={dataOption}\r\n            defaultLabel={dataOption[0].label}\r\n            heightContent={70}\r\n            onSelected={values => {\r\n              setNumTop(values.value);\r\n            }}\r\n          ></DropDown>\r\n        </View>\r\n      </View>\r\n      <ScrollView>\r\n        <View style={{ paddingHorizontal: 15 }}>\r\n          {/* -------------------------- */}\r\n          {dataPromotionReport.length > 0 && (\r\n            <ScrollView horizontal={true} endFillColor={colors.backgroundApp} style={{ backgroundColor: colors.backgroundApp }}>\r\n              <View style={{ marginVertical: 15 }}>\r\n                <VictoryChart\r\n                  domainPadding={{ x: 40, y: 45 }}\r\n                  width={widthChar + 170}\r\n                  height={dataPromotionReport.length * 60 + 100}\r\n                  padding={{ top: 30, bottom: 50, left: 130, right: 80 }}\r\n                  containerComponent={<VictoryVoronoiContainer />}\r\n                  style={{ parent: { cursor: \"pointer\" } }}\r\n                >\r\n                  <VictoryChart>\r\n                    <VictoryLabel\r\n                      y={10}\r\n                      x={100}\r\n                      style={{\r\n                        fontSize: 12,\r\n                        fontStyle: \"normal\",\r\n                        fill: \"#C4C4C4\",\r\n                      }}\r\n                      text={\"Promotion\"}\r\n                    ></VictoryLabel>\r\n                    <VictoryLabel\r\n                      x={widthChar + 110}\r\n                      y={dataPromotionReport.length * 60 - 50}\r\n                      style={{\r\n                        fontSize: 10,\r\n                        fontStyle: \"normal\",\r\n                        fill: colors.colorText,\r\n                      }}\r\n                      text={\"Million\"}\r\n                    />\r\n                    <VictoryLabel\r\n                      y={dataPromotionReport.length * 60 + 60}\r\n                      x={128}\r\n                      style={{\r\n                        fontSize: 10,\r\n                        fontStyle: \"normal\",\r\n                        fill: colors.colorText,\r\n                      }}\r\n                      text={\"0\"}\r\n                    />\r\n\r\n                    <VictoryAxis\r\n                      tickValues={PromotionChart}\r\n                      tickFormat={t => `${t}`}\r\n                      style={whiteStyleBottom}\r\n                      orientation=\"left\"\r\n                    />\r\n                    <VictoryAxis\r\n                      dependentAxis\r\n                      tickValues={valueRevenueChart}\r\n                      tickFormat={t => `${Money(t)}`}\r\n                      style={whiteStyleBottom}\r\n                      orientation=\"bottom\"\r\n                    />\r\n                  </VictoryChart>\r\n                  <VictoryGroup\r\n                    horizontal={true}\r\n                    padding={{ top: 0, bottom: 50, left: 90, right: 80 }}\r\n                    offset={15}\r\n                    style={{ data: { width: 16 } }}\r\n                    colorScale={[\"#5F8BFC\"]}\r\n                  >\r\n                    <VictoryBar\r\n                      labelComponent={<VictoryLabel dx={5} dy={-8} />}\r\n                      style={{\r\n                        labels: {\r\n                          fill: colors.colorText,\r\n                          color: colors.colorText,\r\n                          fontSize: 12,\r\n                        },\r\n                      }}\r\n                      labels={({ datum }) => [Money(Math.round(datum.y))]}\r\n                      data={dataPromotionReport}\r\n                    />\r\n                    <VictoryBar\r\n                      labelComponent={<VictoryLabel dx={-21} dy={7} />}\r\n                      style={{\r\n                        labels: {\r\n                          fill: colors.colorText,\r\n                          color: colors.colorText,\r\n                          fontSize: 12,\r\n                        },\r\n                      }}\r\n                      labels={({ datum }) => [\r\n                        Math.round((datum.y / valueRevenueChart[valueRevenueChart.length - 1]) * 100) + \"%\",\r\n                      ]}\r\n                      data={dataPromotionReport}\r\n                    />\r\n                  </VictoryGroup>\r\n                </VictoryChart>\r\n              </View>\r\n            </ScrollView>\r\n          )}\r\n\r\n          {/* ----------------- */}\r\n          <View>\r\n            <View style={styles.titlrevenue}>\r\n              <Text style={styles.text16}>Revenue Brought by Promotion</Text>\r\n            </View>\r\n            <View style={styles.containerRevenue}>\r\n              <View style={styles.itemrevenueLeft}>\r\n                <View style={{ flex: 2, justifyContent: \"center\" }}>\r\n                  <Text style={[styles.textGray16, styles.textCenter]}>Promotion</Text>\r\n                </View>\r\n                <View style={{ flex: 2, justifyContent: \"center\" }}>\r\n                  <Text style={[styles.text16, styles.textCenter]}>\r\n                    {dataPromotionReport.length > 0 ? dataPromotionReport[0].x : \"Buy 1 Get 1\"}\r\n                  </Text>\r\n                </View>\r\n              </View>\r\n              <View style={styles.itemrevenueRight}>\r\n                <View style={{ flex: 2, justifyContent: \"center\" }}>\r\n                  <Text style={[styles.textGray16, styles.textCenter]}>Revenue</Text>\r\n                </View>\r\n                <View style={{ flex: 2, justifyContent: \"center\" }}>\r\n                  <Text style={[styles.text16, styles.textCenter]}>{`${Money(Math.round(totalNetCostEach)) ?? 0} VND`}</Text>\r\n                </View>\r\n              </View>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </ScrollView>\r\n      {isLoading && <DialogAwait></DialogAwait>}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: colors.backgroundApp,\r\n  },\r\n  line: {\r\n    height: 10,\r\n    backgroundColor: colors.backgroundTab,\r\n  },\r\n  textCenter: {\r\n    textAlign: \"center\",\r\n  },\r\n  text16: {\r\n    color: colors.colorText,\r\n    fontWeight: \"500\",\r\n    fontSize: 16,\r\n  },\r\n  textGray: {\r\n    color: colors.colorLine,\r\n    fontWeight: \"400\",\r\n    fontSize: 14,\r\n  },\r\n  textGray16: {\r\n    color: colors.colorLine,\r\n    fontWeight: \"400\",\r\n    fontSize: 14,\r\n  },\r\n  text: {\r\n    color: colors.white,\r\n    fontWeight: \"400\",\r\n    fontSize: 14,\r\n  },\r\n  titleHeader: {\r\n    paddingVertical: 16,\r\n    paddingHorizontal: 16,\r\n    borderBottomWidth: 1,\r\n    marginLeft: 25,\r\n    marginRight: 25,\r\n    borderBottomColor: colors.colorLine,\r\n  },\r\n\r\n  textTitleHeader: {\r\n    color: colors.colorText,\r\n    fontWeight: \"500\",\r\n    fontSize: 16,\r\n  },\r\n  itemDropDown: {\r\n    padding: 10,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  dropDowns: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  dropDowBody: {\r\n    backgroundColor: colors.grayLight,\r\n    position: \"absolute\",\r\n    zIndex: 1000,\r\n    right: 0,\r\n    left: 0,\r\n    top: 42,\r\n  },\r\n  titlrevenue: {\r\n    borderBottomWidth: 1,\r\n    paddingBottom: 10,\r\n    borderBottomColor: colors.white,\r\n  },\r\n  containerRevenue: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    paddingVertical: 10,\r\n  },\r\n  itemrevenueLeft: {\r\n    flex: 2,\r\n    height: 77,\r\n    marginRight: 5,\r\n    padding: 5,\r\n    borderRadius: 4,\r\n    flexDirection: \"column\",\r\n    backgroundColor: colors.grayLight,\r\n  },\r\n  itemrevenueRight: {\r\n    flex: 2,\r\n    height: 77,\r\n    marginLeft: 5,\r\n    borderRadius: 4,\r\n    padding: 5,\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-around\",\r\n    backgroundColor: colors.grayLight,\r\n  },\r\n});\r\n\r\nconst whiteStyle = {\r\n  grid: { stroke: colors.white, strokeWidth: 0.5 },\r\n  axis: { stroke: colors.backgroundApp },\r\n  tickLabels: { fill: colors.white, fontSize: 10 },\r\n};\r\n\r\nconst whiteStyleBottom = {\r\n  axis: { stroke: colors.white },\r\n  tickLabels: { fontSize: 10, padding: 5, fill: colors.white },\r\n};\r\n"]},"metadata":{},"sourceType":"module"}