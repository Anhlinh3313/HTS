{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\angular\\\\hts_reactnative\\\\src\\\\app\\\\screens\\\\details\\\\TabManagement\\\\StaffManagement\\\\ListOfStaff\\\\items\\\\itemPartTime.tsx\";\n\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { colors } from \"../../../../../../utils/Colors\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport Select from \"../../../../../../components/select\";\nimport Dash from \"react-native-dash\";\nimport { initDataPicker, NO_RESTRICTION } from \"../../../../../../models/staffModel\";\nimport Loading from \"../../../../../../components/dialogs/Loading\";\nimport { useSelector } from \"react-redux\";\nimport moment from \"moment\";\nimport TimePickerStaffParttime from \"../../../../../../components/TimePickerStaffParttime\";\n\nvar itemStaffPartTime = function itemStaffPartTime(props) {\n  var _useSelector = useSelector(function (state) {\n    return state.staff;\n  }),\n      workingPartTimes = _useSelector.workingPartTimes;\n\n  var data = props.data,\n      onChangeTime = props.onChangeTime,\n      onChangeIsNo = props.onChangeIsNo;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(initDataPicker),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLimit = _useState4[0],\n      setLimit = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      visibleBookingTime = _useState6[0],\n      setVisibleBookingTime = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selectedTime = _useState8[0],\n      setSelectedTime = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      timeModel = _useState10[0],\n      setTimeModel = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      noTimeModel = _useState12[0],\n      setNoTimeModel = _useState12[1];\n\n  var onSelectionsChangeTime = function onSelectionsChangeTime(data) {\n    setLimit(initDataPicker);\n    setSelectedTime(data);\n  };\n\n  var onSelectionsChangeNo = function onSelectionsChangeNo(data) {\n    setSelectedTime([]);\n    setLimit(data);\n  };\n\n  useEffect(function () {\n    if (selectedTime.length > 0) {\n      onChangeTime(selectedTime, data.freeDate);\n    }\n\n    if (isLimit.id) {\n      if (isLimit.id === NO_RESTRICTION) {\n        var arrAll = [];\n        workingPartTimes.forEach(function (item) {\n          if (item.checkFreeTime) {\n            arrAll.push(item.id);\n          }\n\n          if (item.id === NO_RESTRICTION) {\n            arrAll.push(item.id);\n          }\n        });\n        onChangeIsNo(arrAll, data.freeDate);\n      } else {\n        onChangeIsNo([isLimit.id], data.freeDate);\n      }\n    }\n  }, [isLimit, selectedTime]);\n  useEffect(function () {\n    if (workingPartTimes.length > 0) {\n      var items = [];\n      var noItems = [];\n      workingPartTimes.map(function (item) {\n        if (!item.checkFreeTime) {\n          noItems.push({\n            id: item.id,\n            code: item.note,\n            name: item.timeRange\n          });\n        } else {\n          items.push({\n            label: item.timeRange,\n            value: item.id\n          });\n        }\n      });\n      setNoTimeModel(noItems);\n      setTimeModel(items);\n    }\n  }, [workingPartTimes]);\n\n  var groupBy = function groupBy(time) {\n    var timesPick = [];\n\n    var selected = _toConsumableArray(time);\n\n    selected.sort(function (a, b) {\n      return a - b;\n    });\n    selected.map(function (item) {\n      timesPick.push(workingPartTimes.find(function (time) {\n        return time.id === item;\n      }));\n    });\n    var arr = [];\n    var arr_soft = timesPick.reduce(function (rv, x) {\n      if (!rv.length || x.value - rv[rv.length - 1].slice(-1)[0].value !== 1) {\n        arr = [x];\n        rv.push(arr);\n      } else {\n        arr = rv[rv.length - 1];\n        arr.push(x);\n      }\n\n      return rv;\n    }, []);\n\n    if (arr_soft.length > 0) {\n      return {\n        from: arr_soft[0][0].timeRange.slice(0, 5),\n        to: arr_soft[arr_soft.length - 1][0].timeRange.slice(-5)\n      };\n    } else return {\n      from: \"\",\n      to: \"\"\n    };\n  };\n\n  return React.createElement(View, {\n    style: {\n      marginTop: 24\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      marginBottom: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: colors.colorText,\n      marginRight: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, moment(data.freeDate).format(\"dddd, DD MMMM yyyy\"))), React.createElement(View, {\n    style: styles.containerSchedule,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: [styles.itemSchedule, {\n      marginBottom: 0\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.textItemReport,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, \"Time\"), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      setVisibleBookingTime(!visibleBookingTime);\n    },\n    style: {\n      position: \"absolute\",\n      right: 0,\n      top: 9\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, React.createElement(Ionicons, {\n    name: \"caret-down\",\n    size: 20,\n    color: colors.colorLine,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }))), React.createElement(View, {\n    style: {\n      marginTop: 5\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, visibleBookingTime ? React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {},\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, React.createElement(TimePickerStaffParttime, {\n    data: selectedTime,\n    onChangeTime: function onChangeTime(times) {\n      return onSelectionsChangeTime(times);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  })), noTimeModel.map(function (item, index) {\n    return React.createElement(View, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }, React.createElement(Dash, {\n      dashStyle: {\n        height: 0.5\n      },\n      dashColor: colors.colorLine,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }), React.createElement(Select, {\n      item: item,\n      isCheck: isLimit.id === item.id,\n      onChecked: function onChecked() {\n        return onSelectionsChangeNo(item);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }));\n  })) : React.createElement(View, {\n    style: {\n      marginBottom: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      paddingHorizontal: 15,\n      paddingBottom: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: styles.textInfoStaff,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, \"From\"), React.createElement(Text, {\n    style: styles.textInfoStaff,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, \"To\")), isLimit.id ? React.createElement(View, {\n    style: {\n      paddingHorizontal: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: styles.textInfoStaff,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }, isLimit.name)) : React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      paddingHorizontal: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: styles.textInfoStaff,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, groupBy(selectedTime).from), React.createElement(Text, {\n    style: styles.textInfoStaff,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, groupBy(selectedTime).to))))), isLoading && React.createElement(Loading, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }));\n};\n\nexport default itemStaffPartTime;\nvar styles = StyleSheet.create({\n  line: {\n    height: 10,\n    backgroundColor: colors.backgroundTab\n  },\n  itemReport: {\n    paddingVertical: 10,\n    borderBottomWidth: 0.5,\n    borderBottomColor: colors.colorLine\n  },\n  textItemReport: {\n    color: colors.colorText,\n    fontSize: 14,\n    fontWeight: \"500\"\n  },\n  textInfoStaff: {\n    color: colors.colorText,\n    fontSize: 14,\n    fontWeight: \"400\"\n  },\n  itemInput: {\n    height: 40,\n    borderRadius: 4,\n    backgroundColor: \"#303030\",\n    paddingHorizontal: 11,\n    color: colors.colorText\n  },\n  buttonForm: {\n    flex: 1,\n    height: 36,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 4\n  },\n  containerSchedule: {\n    backgroundColor: colors.grayLight,\n    borderRadius: 4,\n    marginBottom: 10,\n    paddingHorizontal: 15\n  },\n  itemSchedule: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    height: 41,\n    marginBottom: 15,\n    borderBottomWidth: 0.5,\n    borderBottomColor: colors.colorLine\n  },\n  dot: {\n    width: 4,\n    height: 4,\n    borderRadius: 4,\n    backgroundColor: colors.colorText,\n    marginHorizontal: 9\n  },\n  iconUnCheck: {\n    borderRadius: 4,\n    backgroundColor: \"transparent\",\n    width: 18,\n    height: 18,\n    borderColor: \"#fff\",\n    borderWidth: 1\n  },\n  style0: {\n    margin: 0,\n    marginLeft: 0,\n    marginRight: 0,\n    padding: 0\n  }\n});","map":{"version":3,"sources":["D:/angular/hts_reactnative/src/app/screens/details/TabManagement/StaffManagement/ListOfStaff/items/itemPartTime.tsx"],"names":["React","useState","useEffect","colors","Ionicons","Select","Dash","initDataPicker","NO_RESTRICTION","Loading","useSelector","moment","TimePickerStaffParttime","itemStaffPartTime","props","state","staff","workingPartTimes","data","onChangeTime","onChangeIsNo","isLoading","setIsLoading","isLimit","setLimit","visibleBookingTime","setVisibleBookingTime","selectedTime","setSelectedTime","timeModel","setTimeModel","noTimeModel","setNoTimeModel","onSelectionsChangeTime","onSelectionsChangeNo","length","freeDate","id","arrAll","forEach","item","checkFreeTime","push","items","noItems","map","code","note","name","timeRange","label","value","groupBy","time","timesPick","selected","sort","a","b","find","arr","arr_soft","reduce","rv","x","slice","from","to","marginTop","flexDirection","alignItems","marginBottom","color","colorText","marginRight","format","styles","containerSchedule","itemSchedule","textItemReport","position","right","top","colorLine","times","index","height","justifyContent","paddingHorizontal","paddingBottom","textInfoStaff","StyleSheet","create","line","backgroundColor","backgroundTab","itemReport","paddingVertical","borderBottomWidth","borderBottomColor","fontSize","fontWeight","itemInput","borderRadius","buttonForm","flex","grayLight","dot","width","marginHorizontal","iconUnCheck","borderColor","borderWidth","style0","margin","marginLeft","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { View, StyleSheet, Text, TouchableOpacity } from \"react-native\";\r\nimport { ITimeAndLegendModel } from \"../../../../../../components/management/contants\";\r\nimport { colors } from \"../../../../../../utils/Colors\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport MultiSelect from \"../../../../../../components/MultiSelect\";\r\nimport Select from \"../../../../../../components/select\";\r\nimport Dash from \"react-native-dash\";\r\nimport {\r\n  initDataPicker,\r\n  IPicker,\r\n  IWorkingSchedulePartTime,\r\n  NO_RESTRICTION,\r\n  NO_AVAILABILITY,\r\n} from \"../../../../../../models/staffModel\";\r\nimport { StaffService } from \"../../../../../../netWorking/staffService\";\r\nimport Loading from \"../../../../../../components/dialogs/Loading\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../../../../../redux/reducers\";\r\nimport moment from \"moment\";\r\nimport TimePickerStaffParttime from \"../../../../../../components/TimePickerStaffParttime\";\r\ninterface Props {\r\n  data: IWorkingSchedulePartTime;\r\n  onChangeTime: (data: number[], id: string) => void;\r\n  onChangeIsNo: (data: number[], id: string) => void;\r\n}\r\nconst itemStaffPartTime = (props: Props) => {\r\n  const { workingPartTimes } = useSelector((state: RootState) => state.staff);\r\n  const { data, onChangeTime, onChangeIsNo } = props;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [isLimit, setLimit] = useState(initDataPicker); // no availability or no restriction\r\n\r\n  const [visibleBookingTime, setVisibleBookingTime] = useState(false);\r\n  const [selectedTime, setSelectedTime] = useState<number[]>([]);\r\n  const [timeModel, setTimeModel] = useState([]);\r\n  const [noTimeModel, setNoTimeModel] = useState([]);\r\n\r\n  const onSelectionsChangeTime = (data: any) => {\r\n    setLimit(initDataPicker);\r\n    setSelectedTime(data);\r\n  };\r\n  const onSelectionsChangeNo = (data: IPicker) => {\r\n    setSelectedTime([]);\r\n    setLimit(data);\r\n  };\r\n  useEffect(() => {\r\n    if (selectedTime.length > 0) {\r\n      onChangeTime(selectedTime, data.freeDate);\r\n    }\r\n    if (isLimit.id) {\r\n      if (isLimit.id === NO_RESTRICTION) {\r\n        let arrAll = [];\r\n        workingPartTimes.forEach(item => {\r\n          if (item.checkFreeTime) {\r\n            arrAll.push(item.id);\r\n          }\r\n          if (item.id === NO_RESTRICTION) {\r\n            arrAll.push(item.id);\r\n          }\r\n        });\r\n        onChangeIsNo(arrAll, data.freeDate);\r\n      } else {\r\n        onChangeIsNo([isLimit.id], data.freeDate);\r\n      }\r\n    }\r\n  }, [isLimit, selectedTime]);\r\n\r\n  useEffect(() => {\r\n    if (workingPartTimes.length > 0) {\r\n      let items = [];\r\n      let noItems = [];\r\n      workingPartTimes.map(item => {\r\n        if (!item.checkFreeTime) {\r\n          noItems.push({ id: item.id, code: item.note, name: item.timeRange });\r\n        } else {\r\n          items.push({ label: item.timeRange, value: item.id });\r\n        }\r\n      });\r\n      setNoTimeModel(noItems);\r\n      setTimeModel(items);\r\n    }\r\n  }, [workingPartTimes]);\r\n\r\n  const groupBy = function (time) {\r\n    let timesPick = [];\r\n    let selected = [...time];\r\n    selected.sort((a, b) => a - b);\r\n    selected.map(item => {\r\n      timesPick.push(workingPartTimes.find(time => time.id === item));\r\n    });\r\n    let arr = [];\r\n    const arr_soft = timesPick.reduce(function (rv, x) {\r\n      if (!rv.length || x.value - rv[rv.length - 1].slice(-1)[0].value !== 1) {\r\n        arr = [x];\r\n        rv.push(arr);\r\n      } else {\r\n        arr = rv[rv.length - 1];\r\n        arr.push(x);\r\n      }\r\n      return rv;\r\n    }, []);\r\n    if (arr_soft.length > 0) {\r\n      return { from: arr_soft[0][0].timeRange.slice(0, 5), to: arr_soft[arr_soft.length - 1][0].timeRange.slice(-5) };\r\n    } else return { from: \"\", to: \"\" };\r\n  };\r\n  return (\r\n    <View style={{ marginTop: 24 }}>\r\n      <View style={{ flexDirection: \"row\", alignItems: \"center\", marginBottom: 10 }}>\r\n        <Text style={{ color: colors.colorText, marginRight: 10 }}>{moment(data.freeDate).format(\"dddd, DD MMMM yyyy\")}</Text>\r\n      </View>\r\n      <View style={styles.containerSchedule}>\r\n        <View style={[styles.itemSchedule, { marginBottom: 0 }]}>\r\n          <Text style={styles.textItemReport}>Time</Text>\r\n          <TouchableOpacity\r\n            onPress={() => {\r\n              setVisibleBookingTime(!visibleBookingTime);\r\n            }}\r\n            style={{ position: \"absolute\", right: 0, top: 9 }}\r\n          >\r\n            <Ionicons name=\"caret-down\" size={20} color={colors.colorLine} />\r\n          </TouchableOpacity>\r\n        </View>\r\n        <View style={{ marginTop: 5 }}>\r\n          {visibleBookingTime ? (\r\n            <View>\r\n              <View style={{ }}>\r\n                {/* <MultiSelect\r\n                  items={timeModel}\r\n                  value={selectedTime}\r\n                  onChecked={items => onSelectionsChangeTime(items)}\r\n                ></MultiSelect> */}\r\n                <TimePickerStaffParttime data={selectedTime} onChangeTime={(times)=>onSelectionsChangeTime(times)}></TimePickerStaffParttime>\r\n              </View>\r\n              {noTimeModel.map((item, index) => {\r\n                return (\r\n                  <View key={index}>\r\n                    <Dash dashStyle={{ height: 0.5 }} dashColor={colors.colorLine} />\r\n                    <Select item={item} isCheck={isLimit.id === item.id} onChecked={() => onSelectionsChangeNo(item)}></Select>\r\n                  </View>\r\n                );\r\n              })}\r\n            </View>\r\n          ) : (\r\n            <View style={{ marginBottom: 15 }}>\r\n              <View\r\n                style={{\r\n                  flexDirection: \"row\",\r\n                  justifyContent: \"space-between\",\r\n                  alignItems: \"center\",\r\n                  paddingHorizontal: 15,\r\n                  paddingBottom: 15,\r\n                }}\r\n              >\r\n                <Text style={styles.textInfoStaff}>From</Text>\r\n                <Text style={styles.textInfoStaff}>To</Text>\r\n              </View>\r\n              {isLimit.id ? (\r\n                <View style={{ paddingHorizontal: 15 }}>\r\n                  <Text style={styles.textInfoStaff}>{isLimit.name}</Text>\r\n                </View>\r\n              ) : (\r\n                <View\r\n                  style={{ flexDirection: \"row\", justifyContent: \"space-between\", alignItems: \"center\", paddingHorizontal: 15 }}\r\n                >\r\n                  <Text style={styles.textInfoStaff}>{groupBy(selectedTime).from}</Text>\r\n                  <Text style={styles.textInfoStaff}>{groupBy(selectedTime).to}</Text>\r\n                </View>\r\n              )}\r\n            </View>\r\n          )}\r\n        </View>\r\n      </View>\r\n      {isLoading && <Loading />}\r\n    </View>\r\n  );\r\n};\r\nexport default itemStaffPartTime;\r\n\r\nconst styles = StyleSheet.create({\r\n  line: {\r\n    height: 10,\r\n    backgroundColor: colors.backgroundTab,\r\n  },\r\n  itemReport: {\r\n    paddingVertical: 10,\r\n    borderBottomWidth: 0.5,\r\n    borderBottomColor: colors.colorLine,\r\n  },\r\n  textItemReport: {\r\n    color: colors.colorText,\r\n    fontSize: 14,\r\n    fontWeight: \"500\",\r\n  },\r\n  textInfoStaff: {\r\n    color: colors.colorText,\r\n    fontSize: 14,\r\n    fontWeight: \"400\",\r\n  },\r\n  itemInput: {\r\n    height: 40,\r\n    borderRadius: 4,\r\n    backgroundColor: \"#303030\",\r\n    paddingHorizontal: 11,\r\n    color: colors.colorText,\r\n  },\r\n  buttonForm: {\r\n    flex: 1,\r\n    height: 36,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 4,\r\n  },\r\n  containerSchedule: {\r\n    backgroundColor: colors.grayLight,\r\n    borderRadius: 4,\r\n    marginBottom: 10,\r\n    paddingHorizontal: 15,\r\n  },\r\n  itemSchedule: {\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    height: 41,\r\n    marginBottom: 15,\r\n    borderBottomWidth: 0.5,\r\n    borderBottomColor: colors.colorLine,\r\n  },\r\n  dot: {\r\n    width: 4,\r\n    height: 4,\r\n    borderRadius: 4,\r\n    backgroundColor: colors.colorText,\r\n    marginHorizontal: 9,\r\n  },\r\n\r\n  iconUnCheck: {\r\n    borderRadius: 4,\r\n    backgroundColor: \"transparent\",\r\n    width: 18,\r\n    height: 18,\r\n    borderColor: \"#fff\",\r\n    borderWidth: 1,\r\n  },\r\n  style0: {\r\n    margin: 0,\r\n    marginLeft: 0,\r\n    marginRight: 0,\r\n    padding: 0,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}