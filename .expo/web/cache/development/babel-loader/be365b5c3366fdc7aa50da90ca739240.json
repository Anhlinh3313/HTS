{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\angular\\\\hts_reactnative\\\\src\\\\app\\\\screens\\\\details\\\\TabManagement\\\\StaffManagement\\\\Reports\\\\items\\\\itemAttendanceRecord.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { colors } from \"../../../../../../utils/Colors\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { CheckBox } from \"react-native-elements\";\nimport { Table, Row } from \"react-native-table-component\";\nimport moment from \"moment\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { ReportStaffService } from \"../../../../../../netWorking/staffService\";\nexport default function ItemAttendanceRecord(props) {\n  var _this = this;\n\n  var dispatch = useDispatch();\n  var reports = useSelector(function (state) {\n    return state.reports;\n  });\n  var legends = useSelector(function (state) {\n    return state.staff.legends;\n  });\n  var tableHead = [];\n  var tableRow = [];\n  var widthArr = [];\n  legends.map(function (item) {\n    tableHead.push(item.code);\n    tableRow.push(\"---\");\n    widthArr.push(44);\n  });\n  var weeks = [];\n\n  for (var i = 0; i < Math.ceil(moment(new Date(new Date(moment(reports.fromDate).format(\"YYYY-MM-DD\")).getFullYear(), new Date(moment(reports.fromDate).format(\"YYYY-MM-DD\")).getMonth() + 1, 0)).date() / 7); i++) {\n    weeks.push({\n      key: i + 1,\n      value: \"Week \" + (i + 1)\n    });\n  }\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isNotPresent = _useState2[0],\n      setIsNotPresent = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isShowWeeks = _useState4[0],\n      setIsShowWeeks = _useState4[1];\n\n  var _useState5 = useState(weeks[0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      valueWeeks = _useState6[0],\n      setValueWeeks = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      dataLegendState = _useState8[0],\n      setDataLegendState = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      itemChange = _useState10[0],\n      setItemChange = _useState10[1];\n\n  var _useState11 = useState(tableRow),\n      _useState12 = _slicedToArray(_useState11, 2),\n      dataRowState = _useState12[0],\n      setDataRowState = _useState12[1];\n\n  var onHandleLegend = function onHandleLegend(index) {\n    if (itemChange) {\n      setItemChange(0);\n    } else setItemChange(index);\n  };\n\n  var pickWeek = function pickWeek(item) {\n    setValueWeeks(item);\n    dispatch({\n      type: \"CHANGE_DATE\",\n      payload: {\n        fromDate: moment(new Date(moment(reports.endDate).format(\"YYYY-MM-DD\")).setDate(item.key * 7 - 6)).format(\"YYYY-MM-DD 00:00\"),\n        endDate: moment(new Date(moment(reports.endDate).format(\"YYYY-MM-DD\")).setDate(item.key * 7)).format(\"YYYY-MM-DD 00:00\")\n      }\n    });\n    setIsShowWeeks(false);\n  };\n\n  var handleConfirmLegend = function handleConfirmLegend(item) {\n    var res, data, index;\n    return _regeneratorRuntime.async(function handleConfirmLegend$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(ReportStaffService.updateOfficeAttendanceRecord(props.position.id, [{\n              workingScheduleId: itemChange,\n              LegendId: item.id\n            }]));\n\n          case 2:\n            res = _context.sent;\n\n            if (res.isSuccess == 1 && res.data) {\n              data = _toConsumableArray(dataLegendState);\n              index = dataLegendState.findIndex(function (e) {\n                return e.workingScheduleId === itemChange;\n              });\n              data[index] = _objectSpread(_objectSpread({}, data[index]), {}, {\n                legendId: item.id,\n                legendCode: item.code\n              });\n              setDataLegendState(data);\n            }\n\n            setItemChange(0);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleColor = function handleColor(item) {\n    switch (item) {\n      case \"P\":\n        return \"#76D146\";\n\n      case \"NP\":\n        return \"#FDB441\";\n\n      case null:\n        return \"#8D7550\";\n\n      default:\n        return \"#FF3232\";\n    }\n  };\n\n  useEffect(function () {\n    if (props.data) {\n      setDataLegendState(props.data.staffWorkingDayInfo);\n\n      var _tableRow = [].concat(tableRow);\n\n      tableHead.map(function (item, index) {\n        Object.keys(props.data).map(function (legend) {\n          if (item == legend.toUpperCase()) {\n            _tableRow[index] = props.data[legend];\n          }\n        });\n      });\n      setDataRowState(_tableRow);\n    }\n  }, [props.data]);\n\n  var disableLegend = function disableLegend(item) {\n    if (item != null && item.workingDate && item.workingDate.slice(0, 10) != moment(new Date()).format(\"YYYY-MM-DD\")) {\n      return true;\n    }\n\n    if (item.legendCode == \"P\") {\n      return false;\n    }\n\n    if (item.legendCode == null) {\n      return false;\n    }\n\n    return true;\n  };\n\n  useEffect(function () {\n    weeks.map(function (item) {\n      if (item.key === Math.ceil(moment(reports.fromDate).date() / 7)) {\n        setValueWeeks(item);\n      }\n    });\n  }, [reports.fromDate]);\n  return React.createElement(View, {\n    style: {\n      backgroundColor: \"#414141\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      paddingHorizontal: 16,\n      zIndex: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: [styles.row_between, {\n      marginTop: 10\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.textGray,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, \"Roster\"), React.createElement(Text, {\n    style: styles.textTitleHeader400,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, props.data ? props.data.dutyName : \"-\")), React.createElement(View, {\n    style: [styles.row_between, {\n      paddingVertical: 10\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.textGray,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, \"Check In\"), React.createElement(CheckBox, {\n    containerStyle: {\n      margin: 0,\n      marginLeft: 0,\n      marginRight: 0,\n      padding: 0\n    },\n    checkedIcon: React.createElement(View, {\n      style: styles.iconChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }, React.createElement(Ionicons, {\n      name: \"checkmark\",\n      size: 14,\n      color: \"#DAB451\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    })),\n    uncheckedIcon: React.createElement(View, {\n      style: styles.iconUnCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 28\n      }\n    }),\n    checked: isNotPresent,\n    onPress: function onPress() {\n      return setIsNotPresent(!isNotPresent);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  })), isNotPresent && React.createElement(View, {\n    style: {\n      marginBottom: 10,\n      backgroundColor: \"#675E50\",\n      padding: 16\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.pickerWeek,\n    onPress: function onPress() {\n      return setIsShowWeeks(!isShowWeeks);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.textTitleHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, valueWeeks.value), React.createElement(Ionicons, {\n    style: {\n      marginLeft: 28\n    },\n    name: \"caret-down\",\n    size: 20,\n    color: \"#fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  })), isShowWeeks && React.createElement(View, {\n    style: {\n      position: \"absolute\",\n      backgroundColor: \"#414141\",\n      top: 50,\n      left: 16,\n      width: 91,\n      zIndex: 9,\n      borderRadius: 4,\n      paddingHorizontal: 12,\n      paddingTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, weeks.map(function (item, index) {\n    return React.createElement(TouchableOpacity, {\n      key: index,\n      style: {\n        marginBottom: 15\n      },\n      onPress: function onPress() {\n        return pickWeek(item);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: styles.textTitleHeader,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 23\n      }\n    }, item.value));\n  })), React.createElement(View, {\n    style: {\n      paddingTop: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  }, dataLegendState.length > 0 && dataLegendState.map(function (item, index) {\n    return React.createElement(View, {\n      key: index,\n      style: [styles.row_between, {\n        marginVertical: 4,\n        zIndex: item.workingScheduleId === itemChange ? 10 : 5\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    }, React.createElement(View, {\n      style: [styles.row_between, {\n        width: 80\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 23\n      }\n    }, React.createElement(Text, {\n      style: styles.textWeekDays,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }, moment(item.workingDate).format(\"ddd\")), React.createElement(View, {\n      style: {\n        backgroundColor: handleColor(item.legendCode),\n        padding: 8,\n        borderRadius: 99,\n        width: 38,\n        height: 38,\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 25\n      }\n    }, React.createElement(Text, {\n      style: styles.textNumber,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 27\n      }\n    }, moment(item.workingDate).format(\"DD\")))), React.createElement(TouchableOpacity, {\n      disabled: disableLegend(item),\n      onPress: function onPress() {\n        onHandleLegend(item.workingScheduleId);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 23\n      }\n    }, React.createElement(View, {\n      style: [{\n        width: 120,\n        borderRadius: 4,\n        backgroundColor: !disableLegend(item) ? \"#414141\" : \"#8C8C8C\",\n        paddingHorizontal: 12,\n        paddingVertical: 9\n      }, styles.row_between],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 25\n      }\n    }, React.createElement(Text, {\n      style: styles.textTitleHeader,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 27\n      }\n    }, item.legendCode), React.createElement(Ionicons, {\n      style: {\n        marginLeft: 28\n      },\n      name: \"caret-down\",\n      size: 14,\n      color: !disableLegend(item) ? \"#fff\" : \"#555555\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 27\n      }\n    }))), item.workingScheduleId === itemChange && React.createElement(View, {\n      style: {\n        backgroundColor: \"#878787\",\n        borderRadius: 4,\n        position: \"absolute\",\n        width: 120,\n        height: 110,\n        right: 0,\n        top: 37,\n        shadowColor: \"#000\",\n        shadowOffset: {\n          width: 0,\n          height: 2\n        },\n        shadowOpacity: 0.25,\n        shadowRadius: 3.84,\n        elevation: 5,\n        paddingTop: 8\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 25\n      }\n    }, React.createElement(ScrollView, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 27\n      }\n    }, legends.map(function (item) {\n      return React.createElement(TouchableOpacity, {\n        key: item.id,\n        style: {\n          paddingHorizontal: 16,\n          paddingTop: 8,\n          paddingBottom: 8\n        },\n        onPress: function onPress() {\n          handleConfirmLegend(item);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: styles.textTitleHeader,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 35\n        }\n      }, item.code));\n    }))));\n  })))), React.createElement(ScrollView, {\n    horizontal: true,\n    style: {\n      borderRadius: 4,\n      paddingHorizontal: 16\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }\n  }, React.createElement(Table, {\n    style: {\n      marginVertical: 10,\n      borderRadius: 4,\n      marginRight: 32\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }, React.createElement(Row, {\n    data: tableHead,\n    widthArr: widthArr,\n    style: {\n      borderTopLeftRadius: 4,\n      borderTopRightRadius: 4,\n      height: 36,\n      backgroundColor: \"#878787\"\n    },\n    textStyle: styles.textTableTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }), React.createElement(Row, {\n    data: dataRowState,\n    widthArr: widthArr,\n    style: [styles.styleRowTable],\n    textStyle: styles.textTable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 11\n    }\n  }))));\n}\nvar styles = StyleSheet.create({\n  row_between: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  },\n  iconChecked: {\n    borderRadius: 4,\n    backgroundColor: \"#fff\",\n    width: 18,\n    height: 18,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  iconUnCheck: {\n    borderRadius: 4,\n    backgroundColor: \"transparent\",\n    width: 18,\n    height: 18,\n    borderColor: \"#fff\",\n    borderWidth: 1\n  },\n  pickerWeek: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    borderBottomWidth: 1,\n    borderBottomColor: colors.colorLine,\n    width: 91,\n    paddingBottom: 8\n  },\n  textGray: {\n    color: colors.gray,\n    fontWeight: \"400\",\n    fontSize: 14\n  },\n  radius_top: {\n    borderTopLeftRadius: 4,\n    borderTopRightRadius: 4\n  },\n  textTitleHeader400: {\n    color: colors.colorText,\n    fontWeight: \"400\",\n    fontSize: 14\n  },\n  textTitleHeader: {\n    color: colors.colorText,\n    fontWeight: \"500\",\n    fontSize: 14\n  },\n  textWeekDays: {\n    color: colors.colorText,\n    fontSize: 12\n  },\n  textNumber: {\n    color: colors.colorText,\n    fontSize: 16,\n    fontWeight: \"600\"\n  },\n  containerLegend: {\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  legend: {\n    backgroundColor: \"#414141\",\n    borderRadius: 4,\n    padding: 10,\n    width: \"80%\"\n  },\n  textTableTitle: {\n    textAlign: \"center\",\n    color: \"#fff\",\n    fontSize: 14\n  },\n  textTable: {\n    textAlign: \"center\",\n    color: \"#fff\",\n    fontSize: 14\n  },\n  styleRowTable: {\n    height: 37,\n    backgroundColor: \"#3C3B3B\",\n    borderBottomLeftRadius: 4,\n    borderBottomRightRadius: 4\n  }\n});","map":{"version":3,"sources":["D:/angular/hts_reactnative/src/app/screens/details/TabManagement/StaffManagement/Reports/items/itemAttendanceRecord.tsx"],"names":["React","useState","useEffect","TouchableOpacity","colors","Ionicons","CheckBox","Table","Row","moment","useSelector","useDispatch","ReportStaffService","ItemAttendanceRecord","props","dispatch","reports","state","legends","staff","tableHead","tableRow","widthArr","map","item","push","code","weeks","i","Math","ceil","Date","fromDate","format","getFullYear","getMonth","date","key","value","isNotPresent","setIsNotPresent","isShowWeeks","setIsShowWeeks","valueWeeks","setValueWeeks","dataLegendState","setDataLegendState","itemChange","setItemChange","dataRowState","setDataRowState","onHandleLegend","index","pickWeek","type","payload","endDate","setDate","handleConfirmLegend","updateOfficeAttendanceRecord","position","id","workingScheduleId","LegendId","res","isSuccess","data","findIndex","e","legendId","legendCode","handleColor","staffWorkingDayInfo","_tableRow","Object","keys","legend","toUpperCase","disableLegend","workingDate","slice","backgroundColor","paddingHorizontal","zIndex","styles","row_between","marginTop","textGray","textTitleHeader400","dutyName","paddingVertical","margin","marginLeft","marginRight","padding","iconChecked","iconUnCheck","marginBottom","pickerWeek","textTitleHeader","top","left","width","borderRadius","paddingTop","length","marginVertical","textWeekDays","height","alignItems","justifyContent","textNumber","right","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","paddingBottom","borderTopLeftRadius","borderTopRightRadius","textTableTitle","styleRowTable","textTable","StyleSheet","create","flexDirection","borderColor","borderWidth","borderBottomWidth","borderBottomColor","colorLine","color","gray","fontWeight","fontSize","radius_top","colorText","containerLegend","flex","textAlign","borderBottomLeftRadius","borderBottomRightRadius"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { StyleSheet, Text, View, ScrollView } from \"react-native\";\r\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\r\nimport { colors } from \"../../../../../../utils/Colors\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport { CheckBox } from \"react-native-elements\";\r\nimport { Table, Row } from \"react-native-table-component\";\r\nimport { IItemOfficeAttendanceRecord, IPicker } from \"../../../../../../models/staffModel\";\r\nimport moment from \"moment\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { RootState } from \"../../../../../../redux/reducers\";\r\nimport { ReportStaffService } from \"../../../../../../netWorking/staffService\";\r\nexport default function ItemAttendanceRecord(props: any) {\r\n  const dispatch = useDispatch();\r\n  const reports = useSelector((state: RootState) => state.reports);\r\n  const legends = useSelector((state: RootState) => state.staff.legends);\r\n  const tableHead = [];\r\n  const tableRow = [];\r\n  const widthArr = [];\r\n  legends.map(item => {\r\n    tableHead.push(item.code);\r\n    tableRow.push(\"---\");\r\n    widthArr.push(44);\r\n  });\r\n  const weeks = [];\r\n  /// lấy số tuần trong tháng\r\n  for (\r\n    let i = 0;\r\n    i <\r\n    Math.ceil(\r\n      moment(\r\n        new Date(\r\n          new Date(moment(reports.fromDate).format(\"YYYY-MM-DD\")).getFullYear(),\r\n          new Date(moment(reports.fromDate).format(\"YYYY-MM-DD\")).getMonth() + 1,\r\n          0\r\n        )\r\n      ).date() / 7\r\n    );\r\n    i++\r\n  ) {\r\n    weeks.push({ key: i + 1, value: `Week ${i + 1}` });\r\n  }\r\n  //\r\n  const [isNotPresent, setIsNotPresent] = useState(false);\r\n  const [isShowWeeks, setIsShowWeeks] = useState(false);\r\n  const [valueWeeks, setValueWeeks] = useState(weeks[0]);\r\n  const [dataLegendState, setDataLegendState] = useState<IItemOfficeAttendanceRecord[]>([]);\r\n  const [itemChange, setItemChange] = useState(0);\r\n  const [dataRowState, setDataRowState] = useState(tableRow);\r\n\r\n  const onHandleLegend = (index: number) => {\r\n    if (itemChange) {\r\n      setItemChange(0);\r\n    } else setItemChange(index);\r\n  };\r\n  const pickWeek = (item: any) => {\r\n    setValueWeeks(item);\r\n    dispatch({\r\n      type: \"CHANGE_DATE\",\r\n      payload: {\r\n        fromDate: moment(new Date(moment(reports.endDate).format(\"YYYY-MM-DD\")).setDate(item.key * 7 - 6)).format(\r\n          \"YYYY-MM-DD 00:00\"\r\n        ),\r\n        endDate: moment(new Date(moment(reports.endDate).format(\"YYYY-MM-DD\")).setDate(item.key * 7)).format(\"YYYY-MM-DD 00:00\"),\r\n      },\r\n    });\r\n    setIsShowWeeks(false);\r\n  };\r\n  const handleConfirmLegend = async (item: IPicker) => {\r\n    const res = await ReportStaffService.updateOfficeAttendanceRecord(props.position.id, [\r\n      { workingScheduleId: itemChange, LegendId: item.id },\r\n    ]);\r\n    \r\n    if (res.isSuccess == 1 && res.data) {\r\n      let data = [...dataLegendState];\r\n      let index = dataLegendState.findIndex(e => e.workingScheduleId === itemChange);\r\n      data[index] = { ...data[index], legendId: item.id, legendCode: item.code };\r\n      setDataLegendState(data);\r\n    }\r\n    setItemChange(0);\r\n  };\r\n\r\n  const handleColor = (item: string) => {\r\n    switch (item) {\r\n      case \"P\":\r\n        return \"#76D146\";\r\n      case \"NP\":\r\n        return \"#FDB441\";\r\n      case null:\r\n        return \"#8D7550\";\r\n      default:\r\n        return \"#FF3232\";\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.data) {\r\n      setDataLegendState(props.data.staffWorkingDayInfo);\r\n      let _tableRow = [...tableRow];\r\n      tableHead.map((item, index) => {\r\n        Object.keys(props.data).map(legend => {\r\n          if (item == legend.toUpperCase()) {\r\n            _tableRow[index] = props.data[legend];\r\n          }\r\n        });\r\n      });\r\n      setDataRowState(_tableRow);\r\n    }\r\n  }, [props.data]);\r\n  const disableLegend = item => {\r\n    if (item?.workingDate && item.workingDate.slice(0, 10) != moment(new Date()).format(\"YYYY-MM-DD\")) {\r\n      return true;\r\n    }\r\n    if (item.legendCode == \"P\") {\r\n      return false;\r\n    }\r\n    if (item.legendCode == null) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n  useEffect(() => {\r\n    weeks.map(item => {\r\n      if (item.key === Math.ceil(moment(reports.fromDate).date() / 7)) {\r\n        setValueWeeks(item);\r\n      }\r\n    });\r\n  }, [reports.fromDate]);\r\n\r\n  return (\r\n    <View style={{ backgroundColor: \"#414141\" }}>\r\n      <View style={{ paddingHorizontal: 16, zIndex: 2 }}>\r\n        <View style={[styles.row_between, { marginTop: 10 }]}>\r\n          <Text style={styles.textGray}>Roster</Text>\r\n          <Text style={styles.textTitleHeader400}>{props.data ? props.data.dutyName : \"-\"}</Text>\r\n        </View>\r\n        <View style={[styles.row_between, { paddingVertical: 10 }]}>\r\n          <Text style={styles.textGray}>Check In</Text>\r\n          <CheckBox\r\n            containerStyle={{\r\n              margin: 0,\r\n              marginLeft: 0,\r\n              marginRight: 0,\r\n              padding: 0,\r\n            }}\r\n            checkedIcon={\r\n              <View style={styles.iconChecked}>\r\n                <Ionicons name={\"checkmark\"} size={14} color=\"#DAB451\"></Ionicons>\r\n              </View>\r\n            }\r\n            uncheckedIcon={<View style={styles.iconUnCheck}></View>}\r\n            checked={isNotPresent}\r\n            onPress={() => setIsNotPresent(!isNotPresent)}\r\n          />\r\n        </View>\r\n        {isNotPresent && (\r\n          <View\r\n            style={{\r\n              marginBottom: 10,\r\n              backgroundColor: \"#675E50\",\r\n              padding: 16,\r\n            }}\r\n          >\r\n            <TouchableOpacity style={styles.pickerWeek} onPress={() => setIsShowWeeks(!isShowWeeks)}>\r\n              <Text style={styles.textTitleHeader}>{valueWeeks.value}</Text>\r\n              <Ionicons style={{ marginLeft: 28 }} name={\"caret-down\"} size={20} color=\"#fff\"></Ionicons>\r\n            </TouchableOpacity>\r\n            {isShowWeeks && (\r\n              <View\r\n                style={{\r\n                  position: \"absolute\",\r\n                  backgroundColor: \"#414141\",\r\n                  top: 50,\r\n                  left: 16,\r\n                  width: 91,\r\n                  zIndex: 9,\r\n                  borderRadius: 4,\r\n                  paddingHorizontal: 12,\r\n                  paddingTop: 20,\r\n                }}\r\n              >\r\n                {weeks.map((item, index) => {\r\n                  return (\r\n                    <TouchableOpacity key={index} style={{ marginBottom: 15 }} onPress={() => pickWeek(item)}>\r\n                      <Text style={styles.textTitleHeader}>{item.value}</Text>\r\n                    </TouchableOpacity>\r\n                  );\r\n                })}\r\n              </View>\r\n            )}\r\n            <View style={{ paddingTop: 12 }}>\r\n              {dataLegendState.length > 0 &&\r\n                dataLegendState.map((item, index) => {\r\n                  return (\r\n                    <View\r\n                      key={index}\r\n                      style={[\r\n                        styles.row_between,\r\n                        {\r\n                          marginVertical: 4,\r\n                          zIndex: item.workingScheduleId === itemChange ? 10 : 5,\r\n                        },\r\n                      ]}\r\n                    >\r\n                      <View style={[styles.row_between, { width: 80 }]}>\r\n                        <Text style={styles.textWeekDays}>{moment(item.workingDate).format(\"ddd\")}</Text>\r\n                        <View\r\n                          style={{\r\n                            backgroundColor: handleColor(item.legendCode),\r\n                            padding: 8,\r\n                            borderRadius: 99,\r\n                            width: 38,\r\n                            height: 38,\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"center\",\r\n                          }}\r\n                        >\r\n                          <Text style={styles.textNumber}>{moment(item.workingDate).format(\"DD\")}</Text>\r\n                        </View>\r\n                      </View>\r\n                      <TouchableOpacity\r\n                        disabled={disableLegend(item)}\r\n                        onPress={() => {\r\n                          onHandleLegend(item.workingScheduleId);\r\n                        }}\r\n                      >\r\n                        <View\r\n                          style={[\r\n                            {\r\n                              width: 120,\r\n                              borderRadius: 4,\r\n                              backgroundColor: !disableLegend(item) ? \"#414141\" : \"#8C8C8C\",\r\n                              paddingHorizontal: 12,\r\n                              paddingVertical: 9,\r\n                            },\r\n                            styles.row_between,\r\n                          ]}\r\n                        >\r\n                          <Text style={styles.textTitleHeader}>{item.legendCode}</Text>\r\n                          <Ionicons\r\n                            style={{ marginLeft: 28 }}\r\n                            name={\"caret-down\"}\r\n                            size={14}\r\n                            color={!disableLegend(item) ? \"#fff\" : \"#555555\"}\r\n                          ></Ionicons>\r\n                        </View>\r\n                      </TouchableOpacity>\r\n                      {item.workingScheduleId === itemChange && (\r\n                        <View\r\n                          style={{\r\n                            backgroundColor: \"#878787\",\r\n                            borderRadius: 4,\r\n                            position: \"absolute\",\r\n                            width: 120,\r\n                            height: 110,\r\n                            right: 0,\r\n                            top: 37,\r\n                            shadowColor: \"#000\",\r\n                            shadowOffset: { width: 0, height: 2 },\r\n                            shadowOpacity: 0.25,\r\n                            shadowRadius: 3.84,\r\n                            elevation: 5,\r\n                            paddingTop: 8,\r\n                          }}\r\n                        >\r\n                          <ScrollView>\r\n                            {legends.map(item => {\r\n                              return (\r\n                                <TouchableOpacity\r\n                                  key={item.id}\r\n                                  style={{\r\n                                    paddingHorizontal: 16,\r\n                                    paddingTop: 8,\r\n                                    paddingBottom: 8,\r\n                                  }}\r\n                                  onPress={() => {\r\n                                    handleConfirmLegend(item);\r\n                                  }}\r\n                                >\r\n                                  <Text style={styles.textTitleHeader}>{item.code}</Text>\r\n                                </TouchableOpacity>\r\n                              );\r\n                            })}\r\n                          </ScrollView>\r\n                        </View>\r\n                      )}\r\n                    </View>\r\n                  );\r\n                })}\r\n            </View>\r\n          </View>\r\n        )}\r\n      </View>\r\n      <ScrollView horizontal style={{ borderRadius: 4, paddingHorizontal: 16 }}>\r\n        <Table style={{ marginVertical: 10, borderRadius: 4, marginRight: 32 }}>\r\n          <Row\r\n            data={tableHead}\r\n            widthArr={widthArr}\r\n            style={{\r\n              borderTopLeftRadius: 4,\r\n              borderTopRightRadius: 4,\r\n              height: 36,\r\n              backgroundColor: \"#878787\",\r\n            }}\r\n            textStyle={styles.textTableTitle}\r\n          />\r\n\r\n          <Row data={dataRowState} widthArr={widthArr} style={[styles.styleRowTable]} textStyle={styles.textTable} />\r\n        </Table>\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  row_between: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n  },\r\n  iconChecked: {\r\n    borderRadius: 4,\r\n    backgroundColor: \"#fff\",\r\n    width: 18,\r\n    height: 18,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  iconUnCheck: {\r\n    borderRadius: 4,\r\n    backgroundColor: \"transparent\",\r\n    width: 18,\r\n    height: 18,\r\n    borderColor: \"#fff\",\r\n    borderWidth: 1,\r\n  },\r\n  pickerWeek: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: colors.colorLine,\r\n    width: 91,\r\n    paddingBottom: 8,\r\n  },\r\n  textGray: {\r\n    color: colors.gray,\r\n    fontWeight: \"400\",\r\n    fontSize: 14,\r\n  },\r\n  radius_top: {\r\n    borderTopLeftRadius: 4,\r\n    borderTopRightRadius: 4,\r\n  },\r\n  textTitleHeader400: {\r\n    color: colors.colorText,\r\n    fontWeight: \"400\",\r\n    fontSize: 14,\r\n  },\r\n  textTitleHeader: {\r\n    color: colors.colorText,\r\n    fontWeight: \"500\",\r\n    fontSize: 14,\r\n  },\r\n  textWeekDays: {\r\n    color: colors.colorText,\r\n    fontSize: 12,\r\n  },\r\n  textNumber: {\r\n    color: colors.colorText,\r\n    fontSize: 16,\r\n    fontWeight: \"600\",\r\n  },\r\n  containerLegend: {\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  legend: {\r\n    backgroundColor: \"#414141\",\r\n    borderRadius: 4,\r\n    padding: 10,\r\n    width: \"80%\",\r\n  },\r\n  //table\r\n\r\n  textTableTitle: {\r\n    textAlign: \"center\",\r\n    color: \"#fff\",\r\n    fontSize: 14,\r\n  },\r\n  textTable: {\r\n    textAlign: \"center\",\r\n    color: \"#fff\",\r\n    fontSize: 14,\r\n  },\r\n\r\n  styleRowTable: {\r\n    height: 37,\r\n    backgroundColor: \"#3C3B3B\",\r\n    borderBottomLeftRadius: 4,\r\n    borderBottomRightRadius: 4,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}